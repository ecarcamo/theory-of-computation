# Máquina de Turing que reconoce a^n b^n c^n (con n >= 1)
# VERSIÓN 3.0 (Formato YAML 100% en bloque)

q_states:
  q_list:
    - 'q0' # Estado inicial
    - 'q1' # Encontré 'a', buscando 'b'
    - 'q2' # Encontré 'b', buscando 'c'
    - 'q3' # Regresando al inicio
    - 'q4' # Estado final (verificación)
    - 'q_trap' # Estado trampa (rechazo explícito)
  initial: 'q0'
  final: 'q4' # q4 sigue siendo el UNICO estado final

alphabet:
  - a
  - b
  - c

tape_alphabet:
  - a
  - b
  - c
  - X # Marcador para 'a'
  - Y # Marcador para 'b'
  - Z # Marcador para 'c'
  - B # Símbolo Blank

delta:
  # --- Paso 1: Encontrar 'a', marcarla X, buscar 'b' ---
  - params:
      initial_state: 'q0'
      mem_cache_value:
      tape_input: a
    output:
      final_state: 'q1'
      mem_cache_value:
      tape_output: X
      tape_displacement: R

  # --- Paso 2: Buscar 'b', marcarla Y, buscar 'c' ---
  - params:
      initial_state: 'q1'
      mem_cache_value:
      tape_input: a
    output:
      final_state: 'q1'
      mem_cache_value:
      tape_output: a
      tape_displacement: R
  - params:
      initial_state: 'q1'
      mem_cache_value:
      tape_input: Y
    output:
      final_state: 'q1'
      mem_cache_value:
      tape_output: Y
      tape_displacement: R
  - params:
      initial_state: 'q1'
      mem_cache_value:
      tape_input: b
    output:
      final_state: 'q2'
      mem_cache_value:
      tape_output: Y
      tape_displacement: R

  # --- Paso 3: Buscar 'c', marcarla Z, regresar ---
  - params:
      initial_state: 'q2'
      mem_cache_value:
      tape_input: b
    output:
      final_state: 'q2'
      mem_cache_value:
      tape_output: b
      tape_displacement: R
  - params:
      initial_state: 'q2'
      mem_cache_value:
      tape_input: Z
    output:
      final_state: 'q2'
      mem_cache_value:
      tape_output: Z
      tape_displacement: R
  - params:
      initial_state: 'q2'
      mem_cache_value:
      tape_input: c
    output:
      final_state: 'q3'
      mem_cache_value:
      tape_output: Z
      tape_displacement: L

  # --- Paso 4: Regresar (rebobinar) al primer X ---
  - params:
      initial_state: 'q3'
      mem_cache_value:
      tape_input: a
    output:
      final_state: 'q3'
      mem_cache_value:
      tape_output: a
      tape_displacement: L
  - params:
      initial_state: 'q3'
      mem_cache_value:
      tape_input: b
    output:
      final_state: 'q3'
      mem_cache_value:
      tape_output: b
      tape_displacement: L
  - params:
      initial_state: 'q3'
      mem_cache_value:
      tape_input: Y
    output:
      final_state: 'q3'
      mem_cache_value:
      tape_output: Y
      tape_displacement: L
  - params:
      initial_state: 'q3'
      mem_cache_value:
      tape_input: Z
    output:
      final_state: 'q3'
      mem_cache_value:
      tape_output: Z
      tape_displacement: L
  - params:
      initial_state: 'q3'
      mem_cache_value:
      tape_input: X
    output:
      final_state: 'q0'
      mem_cache_value:
      tape_output: X
      tape_displacement: R

  # --- Paso 5: Fin. Si no hay más 'a's, buscar el final ---
  - params:
      initial_state: 'q0'
      mem_cache_value:
      tape_input: Y
    output:
      final_state: 'q4'
      mem_cache_value:
      tape_output: Y
      tape_displacement: R
      
  # --- Paso 6: Verificación (CORREGIDO) ---
  - params:
      initial_state: 'q4'
      mem_cache_value:
      tape_input: Y
    output:
      final_state: 'q4'
      mem_cache_value:
      tape_output: Y
      tape_displacement: R
  - params:
      initial_state: 'q4'
      mem_cache_value:
      tape_input: Z
    output:
      final_state: 'q4'
      mem_cache_value:
      tape_output: Z
      tape_displacement: R
  - params:
      initial_state: 'q4'
      mem_cache_value:
      tape_input: B
    output:
      final_state: 'q4' # Estado final
      mem_cache_value:
      tape_output: B
      tape_displacement: S

  # --- Paso 7: Trampa ---
  - params:
      initial_state: 'q4'
      mem_cache_value:
      tape_input: a
    output:
      final_state: 'q_trap'
      mem_cache_value:
      tape_output: a
      tape_displacement: S
  - params:
      initial_state: 'q4'
      mem_cache_value:
      tape_input: b
    output:
      final_state: 'q_trap'
      mem_cache_value:
      tape_output: b
      tape_displacement: S
  - params:
      initial_state: 'q4'
      mem_cache_value:
      tape_input: c
    output:
      final_state: 'q_trap'
      mem_cache_value:
      tape_output: c
      tape_displacement: S

# Cadenas de prueba (longitud >= 5)
simulation_strings:
  - "aabbcc"      # Aceptada (long 6)
  - "aaabbbccc"   # Aceptada (long 9)
  - "aaabbcc"     # Rechazada (long 7)
  - "aabbbcc"     # Rechazada (long 7)